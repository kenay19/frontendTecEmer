"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4732],{4732:(M,f,d)=>{d.r(f),d.d(f,{ProductsPageModule:()=>k});var _=d(6814),g=d(95),c=d(6728),p=d(3044),P=d(5861),t=d(6689),n=d(151),u=d(1296);function b(i,l){if(1&i){const r=t.EpF();t.TgZ(0,"ion-item")(1,"img",19),t.NdJ("click",function(){const s=t.CHM(r).$implicit,a=t.oxw();return t.KtG(a.changePrincipalImage(s))}),t.qZA()()}if(2&i){const r=l.$implicit;t.xp6(1),t.s9C("src",r,t.LSH)}}function x(i,l){if(1&i){const r=t.EpF();t.TgZ(0,"ion-card",20)(1,"ion-buttons",21)(2,"ion-button",22),t.NdJ("click",function(){t.CHM(r);const e=t.oxw();return t.KtG(e.agregarCarrito(e.equipoMedico))}),t._uU(3,"Agregar a carrito"),t.qZA(),t.TgZ(4,"ion-button",23),t.NdJ("click",function(){t.CHM(r);const e=t.oxw();return t.KtG(e.comprarProducto(e.equipoMedico))}),t._uU(5," Comprar producto "),t.qZA()()()}}function C(i,l){1&i&&t._UZ(0,"div",24)}function O(i,l){if(1&i){const r=t.EpF();t.TgZ(0,"form")(1,"ion-item",25),t._UZ(2,"ion-input",26,27),t.qZA(),t.TgZ(4,"ion-item",25),t._UZ(5,"ion-textarea",28,29),t.qZA(),t.TgZ(7,"ion-item",25),t._UZ(8,"ion-input",30,31),t.qZA(),t.TgZ(10,"ion-item",32)(11,"ion-select",33,34),t.NdJ("ngModelChange",function(e){t.CHM(r);const s=t.oxw();return t.KtG(s.equipoMedico.estado=e)}),t.TgZ(13,"ion-select-option",35),t._uU(14,"En venta"),t.qZA(),t.TgZ(15,"ion-select-option",36),t._uU(16,"Listado"),t.qZA()()(),t.TgZ(17,"ion-buttons")(18,"ion-button",37),t.NdJ("click",function(){t.CHM(r);const e=t.oxw();return t.KtG(e.delete(e.equipoMedico.idEquipoMedico))}),t._uU(19,"Eliminar"),t.qZA(),t.TgZ(20,"ion-button",37),t.NdJ("click",function(){t.CHM(r);const e=t.MAs(3),s=t.MAs(6),a=t.MAs(9),h=t.MAs(12),m=t.oxw();return t.KtG(m.actualizar({nombre:e.value,descripcion:s.value,costo:a.value,estado:h.value}))}),t._uU(21,"Actualizar"),t.qZA()()()}if(2&i){const r=t.oxw();t.xp6(2),t.s9C("value",r.equipoMedico.nombre),t.xp6(3),t.s9C("value",r.equipoMedico.descripcion),t.xp6(3),t.s9C("value",r.equipoMedico.costo),t.xp6(3),t.Q6J("ngModel",r.equipoMedico.estado)}}const v=[{path:"",component:(()=>{var i;class l{constructor(o,e,s,a,h,m){this.products=o,this.route=e,this.auth=s,this.alertController=a,this.router=h,this.elementRef=m,this.showImage=!0,this.total=0}ngOnInit(){var o=this;this.verificarUsuario(JSON.parse(localStorage.getItem("Usuario")));try{this.route.params.forEach(e=>{this.products.getProduct(e.id).subscribe(function(){var s=(0,P.Z)(function*(a){for(let h=0;h<a[0][0].imagenes.length;h++)try{const m=yield o.products.getImageProducts(a[0][0].imagenes[h][0]).toPromise();a[0][0].imagenes[h][0]=URL.createObjectURL(m)}catch(m){console.error(`Error al cargar la imagen: ${m}`)}o.equipoMedico=a[0][0],o.imagenes=o.equipoMedico.imagenes,o.principal=o.imagenes[0],2==o.user.idRol&&o.loadMap(a[0][0])});return function(a){return s.apply(this,arguments)}}())})}catch(e){console.log(e)}}loadMap(o){console.log(o.idVendedor),this.products.getCoordenates(o.idVendedor).subscribe(e=>{console.log(e[0]);const s=this.elementRef.nativeElement.querySelector("#map"),a={lat:parseFloat(e[0].lat),lng:parseFloat(e[0].alt)};console.log(a),this.map=new google.maps.Map(s,{center:a,zoom:12}),google.maps.event.addListenerOnce(this.map,"idle",()=>{s.classList.add("show-map"),this.addMarker({position:{lat:parseFloat(e[0].lat),lng:parseFloat(e[0].alt)},title:o.nombre})})})}changePrincipalImage(o){this.showImage=!0,this.principal=o}agregarCarrito(o){console.log(o);try{o.estado="En carrito",localStorage.getItem("carrito")||localStorage.setItem("carrito",JSON.stringify({idUsuario:this.user.idUsuario,productos:[]}));let e=JSON.parse(localStorage.getItem("carrito"));console.log(e),e.productos.push(o),console.log(e),localStorage.setItem("carrito",JSON.stringify(e)),this.products.updateProduct(o).subscribe(s=>{1==s.affectedRows&&this.createAlert({header:"Producto agregado correctamente al carrito",function:()=>{this.router.navigate(["/donador"])}})})}catch(e){console.log("limpiando"),localStorage.clear(),console.log(e)}}verificarUsuario(o){o?this.user=o:this.router.navigate(["/home"])}actualizar(o){o.idEquipoMedico=this.equipoMedico.idEquipoMedico,console.log(o),this.products.updateProduct(o).subscribe(e=>{1==e.affectedRows&&this.createAlert({header:"Producto Actualizado Correctamente",function:()=>{this.router.navigate(["/vendedor"])}})})}delete(o){console.log(o),this.products.deleteProduct(o).subscribe(e=>{console.log(e),1==e.affectedRows&&this.createAlert({header:"Producto Eliminado Correctamente"})})}createAlert(o){var e=this;return(0,P.Z)(function*(){(yield e.alertController.create({header:o.header,buttons:[{text:"ok",handler:o.function}]})).present()})()}returnPage(){this.router.navigate([["/vendedor","/donador","/solicitante"][this.user.idRol-1]])}addMarker(o){return new google.maps.Marker({position:o.position,map:this.map,title:o.title})}comprarProductos(o){for(let e=0;e<o.length;e++)console.log("hola"),this.total+=parseFloat(o[e].costo);this.alerta(o)}comprarProducto(o){const e=JSON.parse(localStorage.getItem("Usuario")).idUsuario;o.estado="Comprado",this.products.compraVenta(o.idEquipoMedico,e).subscribe(s=>{s.insertId&&this.products.updateProduct(o).subscribe(a=>{1==a.affectedRows&&this.router.navigate(["/donador"])})})}alerta(o){var e=this;return(0,P.Z)(function*(){(yield e.alertController.create({header:"Seguro quiere realizar la compra ",message:"Total a pagar: "+e.total,buttons:[{text:"ok",handler:()=>{e.total=0;for(let a=0;a<o.length;a++)e.comprarProducto(o[a])}},,]})).present()})()}}return(i=l).\u0275fac=function(o){return new(o||i)(t.Y36(n.s),t.Y36(p.gz),t.Y36(u.i),t.Y36(c.Br),t.Y36(p.F0),t.Y36(t.SBq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-products"]],decls:22,vars:5,consts:[["slot","start",1,"ion-logo"],["src","../../assets/logo_transparent.png",1,"logo"],[1,"container-btn_back"],[1,"container_buttons"],[1,"custom-button",3,"click"],["src","../../assets/icon_back.png",1,"icon_back"],[1,"container-complete"],[1,"container-agrupacion"],[1,"container_img"],[1,"container_left-v"],["lines","none"],[4,"ngFor","ngForOf"],[1,"container_center"],["alt","","id","principal",3,"src"],[1,"container_compras"],["class","ion-c-b",4,"ngIf"],["class","mapa","id","map",4,"ngIf"],[1,"container-forms"],[4,"ngIf"],["alt","",3,"src","click"],[1,"ion-c-b"],[1,"cbotones"],[1,"btn_acarrito",3,"click"],[1,"btn_comprar",3,"click"],["id","map",1,"mapa"],[1,"campo"],["label","Nombre","labelPlacement","stacked","type","text",3,"value"],["nombre",""],["label","Descripci\xf3n","labelPlacement","floating","rows","3",3,"value"],["descripcion",""],["label","Costo","labelPlacement","stacked","type","number",3,"value"],["costo",""],[1,"campo","desp"],["label","Estado","label-placement","floating",3,"ngModel","ngModelChange"],["estado",""],["value","En venta"],["value","listado"],[3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-img",1),t.qZA()()(),t.TgZ(4,"ion-content")(5,"div",2)(6,"ion-buttons",3)(7,"ion-button",4),t.NdJ("click",function(){return e.returnPage()}),t._UZ(8,"ion-img",5),t.qZA()()(),t.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"ion-list",10),t.YNc(14,b,2,1,"ion-item",11),t.qZA()(),t.TgZ(15,"div",12),t._UZ(16,"img",13),t.qZA()(),t.TgZ(17,"div",14),t.YNc(18,x,6,0,"ion-card",15),t.YNc(19,C,1,0,"div",16),t.qZA(),t.TgZ(20,"div",17),t.YNc(21,O,22,4,"form",18),t.qZA()()()()),2&o&&(t.xp6(14),t.Q6J("ngForOf",e.imagenes),t.xp6(2),t.s9C("src",e.principal,t.LSH),t.xp6(2),t.Q6J("ngIf",e.user&&2==e.user.idRol&&e.equipoMedico),t.xp6(1),t.Q6J("ngIf",e.user&&2==e.user.idRol),t.xp6(2),t.Q6J("ngIf",e.user&&1==e.user.idRol&&e.equipoMedico))},dependencies:[_.sg,_.O5,g._Y,g.JJ,g.JL,g.On,g.F,c.YG,c.Sm,c.PM,c.W2,c.Gu,c.Xz,c.pK,c.Ie,c.q_,c.t9,c.n0,c.g2,c.sr,c.as,c.QI,c.j9],styles:['@charset "UTF-8";@media (min-width: 991px){.movil[_ngcontent-%COMP%]{display:none}ion-content[_ngcontent-%COMP%]{--background: #E8E8E8}ion-content[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:160px;height:160px;opacity:0;transition:opacity .15s ease-in;display:block}ion-content[_ngcontent-%COMP%]   #map.show-map[_ngcontent-%COMP%]{opacity:1}ion-header[_ngcontent-%COMP%]{height:90px}ion-toolbar[_ngcontent-%COMP%]{height:90px;display:flex;justify-content:space-between;align-items:center;--background: #5DADE2}.logo[_ngcontent-%COMP%]{width:220px;height:160px;margin:7px 0 0}.container_compras[_ngcontent-%COMP%]{height:350px;display:flex;align-items:center;justify-content:center;flex-direction:column}.mapa[_ngcontent-%COMP%]{width:300px;height:200px;margin-top:10px}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.ion-c-b[_ngcontent-%COMP%]{background:#E8E8E8;border-radius:0;box-shadow:none}.cbotones[_ngcontent-%COMP%]{padding:0}.btn_acarrito[_ngcontent-%COMP%], .btn_comprar[_ngcontent-%COMP%]{width:180px;margin:5px 10px 5px 0}.container-btn_back[_ngcontent-%COMP%]{width:100%;height:50px;display:flex;align-items:center;margin-left:5px;margin-bottom:15px}.custom-button[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;justify-content:center;align-items:center;border:none;cursor:pointer;padding:0;background-color:transparent}.icon_back[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.container-complete[_ngcontent-%COMP%]{width:1500px;height:100%;margin:0 auto}.container-agrupacion[_ngcontent-%COMP%]{width:1200px;height:400px;margin:0 auto;display:flex;justify-content:space-between;align-items:flex-start;border:8px solid #3498db;border-radius:10px;padding:20px;box-shadow:0 0 10px #0000001a}.container_img[_ngcontent-%COMP%]{width:750px;height:500px;display:flex}.container_left-v[_ngcontent-%COMP%]{margin-right:20px}.item-native[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0;margin:0}.container_left-v[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;overflow-y:auto;padding:0;margin:0}.container_left-v[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100px;padding:0;margin:0;--background: #E8E8E8}.container_left-v[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;padding:0;margin:0}.container_center[_ngcontent-%COMP%]   img#principal[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover}.container-forms[_ngcontent-%COMP%]{width:425px;margin-left:20px}.container_center[_ngcontent-%COMP%]{width:600px;height:600px}.container-forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}ion-item[_ngcontent-%COMP%]{margin-bottom:11px}.campo[_ngcontent-%COMP%]{border:2px solid #3A0CA3;border-radius:5px}.desp[_ngcontent-%COMP%]{--placeholder-color: black}ion-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:3px}ion-button[_ngcontent-%COMP%]{width:48%;background-color:#3a0ca3;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:box-shadow .3s ease}ion-button[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000001a}ion-button[_ngcontent-%COMP%]:active{box-shadow:none}ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%]{width:100%}ion-label[_ngcontent-%COMP%]{font-size:14px;font-weight:700}ion-select-option[_ngcontent-%COMP%]{font-size:14px}.container_center[_ngcontent-%COMP%]{margin-right:20px}}@media (max-width: 767px){.desktop[_ngcontent-%COMP%]{display:none}ion-content[_ngcontent-%COMP%]{--background: #E8E8E8}ion-header[_ngcontent-%COMP%]{height:90px}ion-toolbar[_ngcontent-%COMP%]{height:90px;width:100%;--background: #5DADE2}.ion-logo[_ngcontent-%COMP%]{padding-top:10px;width:120px;height:100%}.container-btn_back[_ngcontent-%COMP%]{width:100%;height:35px;display:flex;align-items:center}.custom-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;justify-content:center;align-items:center;border:none;cursor:pointer;padding:0;background-color:transparent}.icon_back[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.container_img[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;padding-top:5px;border:5px solid #0096c7;background:#fff}.container_center[_ngcontent-%COMP%]{padding-right:10px;padding-left:15px}#principal[_ngcontent-%COMP%]{width:330px;height:100%}.container_left-v[_ngcontent-%COMP%]{width:80px}.container-agrupacion[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;width:100%}.container-forms[_ngcontent-%COMP%]{border:3px solid #0077b6;width:400px;margin:20px auto;padding:20px;box-shadow:0 4px 8px #0000001a;background-color:#fff;border-radius:8px}.campo[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.desp[_ngcontent-%COMP%]{margin-bottom:20px}.container_left-v[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100px;padding:0;margin:0}.desp[_ngcontent-%COMP%]{--placeholder-color: black}.container_compras[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.mapa[_ngcontent-%COMP%]{width:300px;height:300px;margin-left:auto;margin-right:auto}.cbotones[_ngcontent-%COMP%]{display:flex;gap:8px;background:#E8E8E8}.btn_acarrito[_ngcontent-%COMP%], .btn_comprar[_ngcontent-%COMP%]{background-color:#0077b6;color:#fff;padding:8px 12px;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn_acarrito[_ngcontent-%COMP%]:hover, .btn_comprar[_ngcontent-%COMP%]:hover{background-color:#005689}}']}),l})()}];let w=(()=>{var i;class l{}return(i=l).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(v),p.Bz]}),l})(),k=(()=>{var i;class l{}return(i=l).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[_.ez,g.u5,c.Pc,w]}),l})()},151:(M,f,d)=>{d.d(f,{s:()=>c});var _=d(9862),g=d(6689);let c=(()=>{var p;class P{constructor(n){this.product=n}getProductsids(n){return this.product.post("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/getProductsIds",{idVendedor:n})}getProducts(n){return this.product.post("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/getProducts",{idVendedor:n})}getProduct(n){return this.product.post("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/getProduct",{idProduct:n})}getImageProducts(n){return this.product.post("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/getImageProducts",n,{responseType:"blob"})}updateProduct(n){return this.product.put("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/updateProduct",n)}deleteProduct(n){return this.product.post("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/deleteProduct",{idEquipoMedico:n})}getProductsDonador(){return this.product.get("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/getProductsDonador")}findProduct(n){return this.product.post("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/findProduct",[n])}getCoordenates(n){return this.product.post("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/getCoordenates",{idVendedor:n})}compraVenta(n,u){return this.product.post("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/compraVenta",{idEquipoMedico:n,idUsuario:u})}getProductsSolicitante(){return this.product.get("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/getProductsSolicitante")}donacionAsignada(n,u){return this.product.post("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/DonacionAsignada",{idEquipoMedico:n,idSolicitante:u})}getDonacionesAsignadas(n){return this.product.post("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/getDonacionesAsignadas",{idSolicitante:n})}getTranscription(n){const u=new _.WM;u.append("Content-Type","multipar/form-data");const b=new FormData;return b.append("audioBlob",n,"audio.wav"),this.product.post("https://saludonlinehub-4215a7ac39d8.herokuapp.com/medictools/transcribe",b,{headers:u})}}return(p=P).\u0275fac=function(n){return new(n||p)(g.LFG(_.eN))},p.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),P})()}}]);