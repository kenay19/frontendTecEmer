"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9270],{9270:(E,_,l)=>{l.r(_),l.d(_,{DonadorPageModule:()=>S});var p=l(6814),x=l(95),a=l(6728),h=l(3044),t=l(6689),u=l(5861),f=l(151),C=l(9209);function P(n,c){if(1&n&&(t.TgZ(0,"ion-item")(1,"ion-card")(2,"a",9)(3,"ion-card-content"),t._UZ(4,"img",10),t.TgZ(5,"ion-title",11),t._uU(6),t.qZA(),t.TgZ(7,"span",12),t._uU(8),t.qZA(),t.TgZ(9,"ion-label",13),t._uU(10),t.qZA()()()()()),2&n){const r=c.$implicit;t.xp6(2),t.MGl("href","/products/",r.idEquipoMedico,"",t.LSH),t.xp6(2),t.s9C("src",r.imagenes[0][0],t.LSH),t.xp6(2),t.Oqu(r.nombre),t.xp6(2),t.Oqu(r.descripcion),t.xp6(2),t.hij("$",r.costo,"")}}let b=(()=>{var n;class c{constructor(o,e){this.products=o,this.microfono=e,this.datos=[],this.copyDatos=[],this.estados=[{name:"En venta"}],this.shearch=!0}ngOnInit(){this.cargarProductos()}cargarProductos(){var o=this;return(0,u.Z)(function*(){const e=yield o.products.getProductsDonador().toPromise();for(let i=0;i<Object.keys(e).length;i++){o.datos.push(e[i][0]);for(let s=0;s<o.datos[i].imagenes.length;s++)try{const d=yield o.products.getImageProducts(o.datos[i].imagenes[s][0]).toPromise();o.datos[i].imagenes[s][0]=URL.createObjectURL(d)}catch(d){console.error(`Error al cargar la imagen: ${d}`)}}o.copyDatos=o.datos,console.log(o.datos)})()}filtrado(o){this.filtroSelected!==o?(this.copyDatos=this.datos.filter(e=>e.estado==o),this.filtroSelected=o):this.copyDatos=this.datos}buscador(o){var e=this;return(0,u.Z)(function*(){let i=[];e.products.findProduct(o).subscribe(function(){var s=(0,u.Z)(function*(d){for(let g=0;g<Object.keys(d).length;g++){i.push(d[g][0]);for(let m=0;m<i[g].imagenes.length;m++)e.products.getImageProducts(i[g].imagenes[m][0]).subscribe(A=>{i[g].imagenes[m][0]=URL.createObjectURL(A)})}e.copyDatos=i});return function(d){return s.apply(this,arguments)}}())})()}audioSearch(){if(this.shearch)return this.microfono.startRecord().then(o=>{this.microfono.chunks=[],this.microfono.datos="",this.buscador(o.transcription)}),void(this.shearch=!1);this.microfono.stopRecord(),this.shearch=!0}}return(n=c).\u0275fac=function(o){return new(o||n)(t.Y36(f.s),t.Y36(C.c))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-listado-donador"]],decls:13,vars:1,consts:[[1,"container_buscador"],[1,"buscador"],["buscado",""],[1,"btn_buscador",3,"click"],["src","../../assets/icon_search.png",1,"icono_buscador"],[1,"btn_micro",3,"click"],["src","../../assets/icon_microfono.png",1,"icono_micro"],["lines","none",1,"product-list"],[4,"ngFor","ngForOf"],[1,"estilos-a",3,"href"],["alt","",3,"src"],[1,"product-name"],[1,"product-description"],[1,"product-cost"]],template:function(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"div",0),t._UZ(2,"ion-searchbar",1,2),t.TgZ(4,"ion-buttons")(5,"ion-button",3),t.NdJ("click",function(){t.CHM(i);const d=t.MAs(3);return t.KtG(e.buscador(d.value))}),t._UZ(6,"ion-img",4),t.qZA()(),t.TgZ(7,"ion-buttons")(8,"ion-button",5),t.NdJ("click",function(){return e.audioSearch()}),t._UZ(9,"ion-img",6),t.qZA()()(),t.TgZ(10,"div")(11,"ion-list",7),t.YNc(12,P,11,5,"ion-item",8),t.qZA()()()}2&o&&(t.xp6(12),t.Q6J("ngForOf",e.copyDatos))},dependencies:[p.sg,a.YG,a.Sm,a.PM,a.FN,a.Xz,a.Ie,a.Q$,a.q_,a.VI,a.wd,a.j9],styles:['@charset "UTF-8";@media (min-width: 991px){.movil[_ngcontent-%COMP%]{display:none}ion-searchbar[_ngcontent-%COMP%]{width:1400px;color:#111d13}.container_buscador[_ngcontent-%COMP%]{display:flex;align-items:center}.buscador[_ngcontent-%COMP%]{flex:1;margin-right:2px}.btn_buscador[_ngcontent-%COMP%], .btn_micro[_ngcontent-%COMP%]{width:47px;height:40px}.icono_buscador[_ngcontent-%COMP%], .icono_micro[_ngcontent-%COMP%]{width:60px;height:40px;object-fit:cover}ion-card[_ngcontent-%COMP%]{width:320px;height:350px;margin:10px;border:5px solid #90E0EF;transition:transform .3s ease}ion-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}ion-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.product-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.product-name[_ngcontent-%COMP%], .product-description[_ngcontent-%COMP%], .product-cost[_ngcontent-%COMP%]{margin:5px 0}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-decoration:none}.product-name[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#111d13;height:50px;overflow:hidden;text-overflow:ellipsis;white-space:normal}.product-description[_ngcontent-%COMP%]{width:295px;height:70px;max-height:90px;margin-top:5px;font-size:16px;overflow:hidden;color:#111d13}.product-cost[_ngcontent-%COMP%]{font-size:22px;color:#111d13;width:100%}.estilos-a[_ngcontent-%COMP%]{text-decoration:none}}@media (max-width: 767px){.desktop[_ngcontent-%COMP%]{display:none}.container_buscador[_ngcontent-%COMP%]{margin-top:5px;width:100%;display:flex;align-items:center}ion-searchbar[_ngcontent-%COMP%]{width:100%;padding:0;margin:0;color:#111d13}.product-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}ion-item[_ngcontent-%COMP%]{width:auto}ion-card[_ngcontent-%COMP%]{height:360px;margin:10px;border:5px solid #90E0EF}ion-card-content[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;text-align:center}.product-name[_ngcontent-%COMP%]{width:auto;font-size:18px;font-weight:700;color:#111d13;margin-top:5px}.product-description[_ngcontent-%COMP%]{font-size:14px;color:#111d13;width:auto;height:auto}.product-cost[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#111d13;margin-top:5px}.estilos-a[_ngcontent-%COMP%]{text-decoration:none}}']}),c})();var O=l(8184),M=l(1296);let y=(()=>{var n;class c{constructor(o,e){this.medictools=o,this.crud=e}ngOnInit(){}}return(n=c).\u0275fac=function(o){return new(o||n)(t.Y36(O.t),t.Y36(M.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-formulario-donador"]],decls:0,vars:0,template:function(o,e){}}),c})();function Z(n,c){if(1&n){const r=t.EpF();t.TgZ(0,"ion-item",6)(1,"ion-label",7),t._uU(2),t.qZA(),t.TgZ(3,"ion-label",8),t._uU(4),t.qZA(),t.TgZ(5,"ion-label",9),t._uU(6),t.qZA(),t.TgZ(7,"ion-buttons",10)(8,"ion-button",11),t.NdJ("click",function(){const i=t.CHM(r).$implicit,s=t.oxw();return t.KtG(s.comprarProductos([i]))}),t._uU(9,"Comprar"),t.qZA(),t.TgZ(10,"ion-button",12),t.NdJ("click",function(){const i=t.CHM(r).$implicit,s=t.oxw();return t.KtG(s.eliminar(i.idEquipoMedico))}),t._uU(11,"Eliminar"),t.qZA()()()}if(2&n){const r=c.$implicit;t.xp6(2),t.Oqu(r.nombre),t.xp6(2),t.Oqu(r.descripcion),t.xp6(2),t.hij("$",r.costo,"")}}let v=(()=>{var n;class c{constructor(o,e){this.products=o,this.alertController=e,this.total=0,this.numTotal=0}ngOnInit(){try{this.datos=JSON.parse(localStorage.getItem("carrito")).productos}catch(o){console.log(o)}console.log(this.datos)}eliminar(o){let e=this.datos.filter(i=>i.idEquipoMedico==o);e[0].estado="En venta",console.log(e),this.products.updateProduct(e[0]).subscribe(i=>{if(console.log(i),1==i.affectedRows){this.datos=this.datos.filter(d=>d.idEquipoMedico!==o);let s=JSON.parse(localStorage.getItem("carrito"));s.productos=this.datos,localStorage.setItem("carrito",JSON.stringify(s))}}),console.log(localStorage.getItem("carrito"))}comprarProductos(o){for(let e=0;e<o.length;e++)console.log("hola"),this.total+=parseFloat(o[e].costo);this.alerta(o)}comprarProducto(o){const e=JSON.parse(localStorage.getItem("Usuario")).idUsuario;o.estado="Comprado",this.products.compraVenta(o.idEquipoMedico,e).subscribe(i=>{i.insertId&&this.products.updateProduct(o).subscribe(s=>{if(1==s.affectedRows){this.datos=this.datos.filter(g=>g.idEquipoMedico!=o.idEquipoMedico),console.log(this.datos);const d=JSON.parse(localStorage.getItem("carrito"));d.productos=this.datos,localStorage.setItem("carrito",JSON.stringify(d))}})})}alerta(o){var e=this;return(0,u.Z)(function*(){(yield e.alertController.create({header:"Seguro quiere realizar la compra ",message:"Total a pagar: "+e.total,buttons:[{text:"ok",handler:()=>{e.total=0;for(let s=0;s<o.length;s++)e.comprarProducto(o[s])}},,]})).present()})()}}return(n=c).\u0275fac=function(o){return new(o||n)(t.Y36(f.s),t.Y36(a.Br))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-carrito"]],decls:8,vars:1,consts:[[1,"container-general"],[1,"container-titulo"],[1,"titulo"],[1,"container-carrito"],["lines","none","class","carrito-item",4,"ngFor","ngForOf"],[1,"comprar-carrito",3,"click"],["lines","none",1,"carrito-item"],[1,"nombre"],[1,"descripcion"],[1,"costo"],[1,"botones-carrito"],[1,"comprar",3,"click"],[1,"eliminar",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"ion-title",2),t._uU(3," Materiales m\xe9dicos "),t.qZA()(),t.TgZ(4,"div",3),t.YNc(5,Z,12,3,"ion-item",4),t.qZA(),t.TgZ(6,"ion-button",5),t.NdJ("click",function(){return e.comprarProductos(e.datos)}),t._uU(7,"Comprar carrito"),t.qZA()()),2&o&&(t.xp6(5),t.Q6J("ngForOf",e.datos))},dependencies:[p.sg,a.YG,a.Sm,a.Ie,a.Q$,a.wd],styles:['@charset "UTF-8";@media (min-width: 991px){.movil[_ngcontent-%COMP%]{display:none}.container-general[_ngcontent-%COMP%]{width:100%;height:250px;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;position:relative}.container-titulo[_ngcontent-%COMP%]{width:900px;height:35px;border-radius:7px}ion-title[_ngcontent-%COMP%]{height:100%}.titulo[_ngcontent-%COMP%]{font-size:24px}.container-carrito[_ngcontent-%COMP%]{width:100%}.carrito-item[_ngcontent-%COMP%]{border:1px solid #2c2a2a;justify-content:space-between}.costo[_ngcontent-%COMP%]{font-weight:700;text-align:center}.botones-carrito[_ngcontent-%COMP%]{display:flex;align-items:center}.comprar[_ngcontent-%COMP%], .eliminar[_ngcontent-%COMP%]{margin-left:5px;background-color:#4caf50;color:#fff;border:none;padding:3px 6px;border-radius:5px;cursor:pointer;transition:background-color .3s}.comprar[_ngcontent-%COMP%]:hover, .eliminar[_ngcontent-%COMP%]:hover{background-color:#45a049}.eliminar[_ngcontent-%COMP%]{background-color:#f44336}.eliminar[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.comprar-carrito[_ngcontent-%COMP%]{height:30px;position:absolute;bottom:10px;right:10px;background-color:#2196f3;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.comprar-carrito[_ngcontent-%COMP%]:hover{background-color:#0b7dda}}@media (max-width: 767px){.desktop[_ngcontent-%COMP%], .container-titulo[_ngcontent-%COMP%], .descripcion[_ngcontent-%COMP%]{display:none}.container-general[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.carrito-item[_ngcontent-%COMP%]{height:100%;display:flex;border:1px solid #ddd}.container-carrito[_ngcontent-%COMP%]{width:100%}.carrito-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #ddd;margin-top:10px;margin-bottom:10px;padding:10px}.botones-carrito[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-top:10px}.botones-carrito[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;margin-top:5px}.nombre[_ngcontent-%COMP%]{width:100%}}']}),c})();function w(n,c){1&n&&(t.TgZ(0,"ion-item",20),t._UZ(1,"app-listado-donador"),t.qZA())}function T(n,c){1&n&&(t.TgZ(0,"ion-item",20),t._UZ(1,"app-formulario-donador"),t.qZA())}function k(n,c){1&n&&(t.TgZ(0,"ion-item",20),t._UZ(1,"app-carrito"),t.qZA())}const D=[{path:"",component:(()=>{var n;class c{constructor(o){this.router=o,this.rutas=["/vendedor","/donador","/solicitante"],this.show="listado"}ngOnInit(){const o=JSON.parse(localStorage.getItem("Usuario"));console.log(o),o||this.router.navigate(["/home"]),2!=o.idRol&&this.router.navigate(this.rutas[o.idRol-1])}changeSelected(o){o!==this.showSelected&&(this.show=o)}logOut(){localStorage.removeItem("Usuario"),this.router.navigate(["/"])}}return(n=c).\u0275fac=function(o){return new(o||n)(t.Y36(h.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-donador"]],decls:29,vars:3,consts:[["slot","start",1,"ion-logo"],["src","../../assets/logo_transparent.png",1,"logo"],["slot","end"],[1,"header-content"],["src","../../assets/icon_user_64.png",1,"user-icon"],[1,"user-name"],["slot","end",1,"ion-back"],[1,"custom-button",3,"click"],["src","../../assets/icon_logout_32.png",1,"icono_back"],[1,"container-general"],[1,"container"],[1,"container-buttons"],[3,"click"],["src","../../assets/icon_equipom.png"],[1,"text"],["src","../../assets/icon_carrito.png"],[1,"carrito"],[1,"container-listado"],["lines","none",4,"ngIf"],[1,"container-carrito"],["lines","none"]],template:function(o,e){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-img",1),t.qZA(),t.TgZ(4,"ion-buttons",2)(5,"div",3),t._UZ(6,"ion-img",4),t.TgZ(7,"div",5),t._uU(8,"Usuario"),t.qZA()()(),t.TgZ(9,"ion-buttons",6)(10,"ion-button",7),t.NdJ("click",function(){return e.logOut()}),t._UZ(11,"ion-img",8),t.qZA()()()(),t.TgZ(12,"ion-content",9)(13,"div",10)(14,"div",11)(15,"button",12),t.NdJ("click",function(){return e.changeSelected("listado")}),t._UZ(16,"ion-img",13),t.TgZ(17,"span",14),t._uU(18,"Equipo m\xe9dico"),t.qZA()(),t.TgZ(19,"button",12),t.NdJ("click",function(){return e.changeSelected("carrito")}),t._UZ(20,"ion-img",15),t.TgZ(21,"span",16),t._uU(22,"Carrito"),t.qZA()()()(),t.TgZ(23,"div",17),t.YNc(24,w,2,0,"ion-item",18),t.qZA(),t.TgZ(25,"div"),t.YNc(26,T,2,0,"ion-item",18),t.qZA(),t.TgZ(27,"div",19),t.YNc(28,k,2,0,"ion-item",18),t.qZA()()),2&o&&(t.xp6(24),t.Q6J("ngIf","listado"===e.show),t.xp6(2),t.Q6J("ngIf","formularios"===e.show),t.xp6(2),t.Q6J("ngIf","carrito"===e.show))},dependencies:[p.O5,a.YG,a.Sm,a.W2,a.Gu,a.Xz,a.Ie,a.sr,b,y,v],styles:["@media (min-width: 991px){.movil[_ngcontent-%COMP%]{display:none}ion-content[_ngcontent-%COMP%]{--background: #E8E8E8}ion-header[_ngcontent-%COMP%]{height:90px}ion-toolbar[_ngcontent-%COMP%]{height:90px;display:flex;justify-content:space-between;align-items:center;--background: #5DADE2}.header_img[_ngcontent-%COMP%]{height:165px}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center}.header-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.user-icon[_ngcontent-%COMP%]{width:52px;height:52px;margin-right:2px}.icono_back[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:3px}.user-name[_ngcontent-%COMP%]{font-size:18px}.logo[_ngcontent-%COMP%]{width:220px;height:160px;margin:7px 0 0}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100px}.container-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:20px;margin-bottom:10px}button[_ngcontent-%COMP%]{width:125px;height:70px;display:flex;align-items:center;padding:10px;margin:10px;border-radius:15px;background:#2ecc71;color:#fff;border:none;cursor:pointer;transition:background .3s ease;box-shadow:0 4px 6px #0000001a;transform:scale(1);transition:transform .3s ease}button[_ngcontent-%COMP%]:hover{background:#27ae60;transform:scale(1.05)}.text[_ngcontent-%COMP%]{font-size:16px}.carrito[_ngcontent-%COMP%]{margin-left:2px;font-size:17px}.container-carrito[_ngcontent-%COMP%]{height:250px;display:flex;align-items:center;padding:0;justify-content:center}.container-carrito[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border:3px solid rgb(57,46,119);border-radius:10px}.container-listado[_ngcontent-%COMP%]{position:absolute}}@media (max-width: 767px){.desktop[_ngcontent-%COMP%]{display:none}ion-content[_ngcontent-%COMP%]{--background: #E8E8E8}ion-header[_ngcontent-%COMP%]{height:90px}ion-toolbar[_ngcontent-%COMP%]{height:90px;display:flex;justify-content:space-between;align-items:center;--background: #5DADE2}.header_img[_ngcontent-%COMP%]{height:165px}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center}.header-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.user-icon[_ngcontent-%COMP%]{width:52px;height:52px;margin-right:2px}.icono_back[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:3px}.user-name[_ngcontent-%COMP%]{font-size:18px}.logo[_ngcontent-%COMP%]{width:220px;height:160px;margin:7px 0 0}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100px}.container-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:20px;margin-bottom:10px}button[_ngcontent-%COMP%]{width:125px;height:70px;display:flex;align-items:center;padding:10px;margin:10px;border-radius:15px;background:#2ecc71;color:#fff;border:none;cursor:pointer;transition:background .3s ease;box-shadow:0 4px 6px #0000001a;transform:scale(1);transition:transform .3s ease}button[_ngcontent-%COMP%]:hover{background:#27ae60;transform:scale(1.05)}.text[_ngcontent-%COMP%]{font-size:16px}.carrito[_ngcontent-%COMP%]{margin-left:2px;font-size:17px}.container-carrito[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;padding:0;justify-content:center}.container-carrito[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border:3px solid rgb(57,46,119);border-radius:10px}.container-listado[_ngcontent-%COMP%]{position:absolute}}"]}),c})()}];let U=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(D),h.Bz]}),c})(),S=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,x.u5,a.Pc,U]}),c})()}}]);