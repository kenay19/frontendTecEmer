"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4779],{4779:(P,d,r)=>{r.r(d),r.d(d,{CameraLogPageModule:()=>x});var u=r(6814),E=r(95),l=r(6728),g=r(3044),C=r(5861),o=r(6689),m=r(1296);const h=[{path:"",component:(()=>{var c;class n{constructor(t,s,e){this.router=t,this.elementRef=s,this.auth=e,this.imagenCapturada=null,this.capturingFrames=!0,this.direccion=["/vendedor","/donador","/solicitante"]}ngOnInit(){}ionViewWillEnter(){this.capturingFrames=!0,this.abrirCamaraConVistaPrevia(),this.captureFrames()}abrirCamaraConVistaPrevia(){var t=this;return(0,C.Z)(function*(){const s=t.elementRef.nativeElement.querySelector("#camara-preview");try{t.stream=yield navigator.mediaDevices.getUserMedia({video:!0}),s.srcObject=t.stream,s.play()}catch(e){console.error("Error al acceder a la c\xe1mara:",e)}})()}captureFrames(){var t=this;return(0,C.Z)(function*(){const s=t.elementRef.nativeElement.querySelector("#camara-preview"),e=document.createElement("canvas"),i=e.getContext("2d");for(;t.capturingFrames;){i.drawImage(s,0,0,e.width,e.height),i.getImageData(0,0,e.width,e.height),e.width=150,e.height=150,i.drawImage(s,0,0,e.width,e.height);const v=i.getImageData(0,0,e.width,e.height);try{yield t.auth.cargarImagenesLogin(v.data).subscribe(p=>{"Imagen cargada correctamente"===p.message&&t.auth.logueoFacial("login").subscribe(f=>{f[0].idUsuario&&(localStorage.setItem("Usuario",JSON.stringify(f[0])),t.auth.setUser(f[0]),t.stopVideo(),t.router.navigate([t.direccion[f[0].idRol-1]]))})})}catch(p){console.error(p)}yield new Promise(p=>setTimeout(p,4e3))}})()}navigateToLogin(){this.stopVideo(),this.router.navigate(["/login"])}navigateToRegisterUser(){this.stopVideo(),this.router.navigate(["/register"])}HomeReturn(){this.stopVideo(),this.router.navigate(["/"])}stopVideo(){if(this.stream){const t=this.stream.getTracks();this.capturingFrames=!1,t.forEach(s=>{s.stop()})}}}return(c=n).\u0275fac=function(t){return new(t||c)(o.Y36(g.F0),o.Y36(o.SBq),o.Y36(m.i))},c.\u0275cmp=o.Xpm({type:c,selectors:[["app-camera-log"]],decls:11,vars:1,consts:[[3,"fullscreen"],[1,"video-container"],["id","camara-preview",1,"oval-img"],[1,"main-container"],[1,"button-container"],["id","bn1",1,"custom-button",3,"click"],["id","bn2",1,"custom-button",3,"click"],[1,"btn_regresar",3,"click"]],template:function(t,s){1&t&&(o.TgZ(0,"ion-content",0)(1,"div",1),o._UZ(2,"video",2),o.qZA(),o.TgZ(3,"div",3)(4,"div",4)(5,"ion-button",5),o.NdJ("click",function(){return s.navigateToLogin()}),o._uU(6," INGRESAR "),o.qZA(),o.TgZ(7,"ion-button",6),o.NdJ("click",function(){return s.navigateToRegisterUser()}),o._uU(8," REGISTRARSE "),o.qZA()(),o.TgZ(9,"ion-button",7),o.NdJ("click",function(){return s.HomeReturn()}),o._uU(10," Regresar "),o.qZA()()()),2&t&&o.Q6J("fullscreen",!0)},dependencies:[l.YG,l.W2],styles:["@charset \"UTF-8\";@media (min-width: 991px){.movil[_ngcontent-%COMP%]{display:none}ion-content[_ngcontent-%COMP%]{--background: url(Reconocimiento-facial.219eaa7c80b572fb.jpg) no-repeat center center fixed;--background-size: cover}.main-container[_ngcontent-%COMP%]{color:#fff;height:280px;width:200px;background-color:#ccc;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' viewBox='0 0 1600 1200'%3E%3Cdefs%3E%3ClinearGradient id='a' x1='0' x2='0' y1='0' y2='100%25' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23cccccc'/%3E%3Cstop offset='0.02' stop-color='%23cccccc'/%3E%3Cstop offset='0.02' stop-color='%23757575'/%3E%3Cstop offset='0.032' stop-color='%23cccccc'/%3E%3Cstop offset='0.032' stop-color='%239a9a9a'/%3E%3Cstop offset='0.056' stop-color='%23cccccc'/%3E%3Cstop offset='0.056' stop-color='%23cacaca'/%3E%3Cstop offset='0.07' stop-color='%23cccccc'/%3E%3Cstop offset='0.07' stop-color='%23d8d8d8'/%3E%3Cstop offset='0.1' stop-color='%23cccccc'/%3E%3Cstop offset='0.1' stop-color='%23dedede'/%3E%3Cstop offset='0.126' stop-color='%23cccccc'/%3E%3Cstop offset='0.126' stop-color='%23929292'/%3E%3Cstop offset='0.142' stop-color='%23cccccc'/%3E%3Cstop offset='0.142' stop-color='%23a2a2a2'/%3E%3Cstop offset='0.159' stop-color='%23cccccc'/%3E%3Cstop offset='0.159' stop-color='%23cdcdcd'/%3E%3Cstop offset='0.17' stop-color='%23cccccc'/%3E%3Cstop offset='0.17' stop-color='%23a4a4a4'/%3E%3Cstop offset='0.197' stop-color='%23cccccc'/%3E%3Cstop offset='0.197' stop-color='%23adadad'/%3E%3Cstop offset='0.218' stop-color='%23cccccc'/%3E%3Cstop offset='0.218' stop-color='%23cfcfcf'/%3E%3Cstop offset='0.239' stop-color='%23cccccc'/%3E%3Cstop offset='0.239' stop-color='%23d4d4d4'/%3E%3Cstop offset='0.254' stop-color='%23cccccc'/%3E%3Cstop offset='0.254' stop-color='%23c7c7c7'/%3E%3Cstop offset='0.283' stop-color='%23cccccc'/%3E%3Cstop offset='0.283' stop-color='%235f5f5f'/%3E%3Cstop offset='0.294' stop-color='%23cccccc'/%3E%3Cstop offset='0.294' stop-color='%23d1d1d1'/%3E%3Cstop offset='0.305' stop-color='%23cccccc'/%3E%3Cstop offset='0.305' stop-color='%23c3c3c3'/%3E%3Cstop offset='0.332' stop-color='%23cccccc'/%3E%3Cstop offset='0.332' stop-color='%239d9d9d'/%3E%3Cstop offset='0.346' stop-color='%23cccccc'/%3E%3Cstop offset='0.346' stop-color='%23e4e4e4'/%3E%3Cstop offset='0.362' stop-color='%23cccccc'/%3E%3Cstop offset='0.362' stop-color='%236f6f6f'/%3E%3Cstop offset='0.381' stop-color='%23cccccc'/%3E%3Cstop offset='0.381' stop-color='%23979797'/%3E%3Cstop offset='0.415' stop-color='%23cccccc'/%3E%3Cstop offset='0.415' stop-color='%23767676'/%3E%3Cstop offset='0.428' stop-color='%23cccccc'/%3E%3Cstop offset='0.428' stop-color='%23e0e0e0'/%3E%3Cstop offset='0.442' stop-color='%23cccccc'/%3E%3Cstop offset='0.442' stop-color='%23bebebe'/%3E%3Cstop offset='0.456' stop-color='%23cccccc'/%3E%3Cstop offset='0.456' stop-color='%23c0c0c0'/%3E%3Cstop offset='0.498' stop-color='%23cccccc'/%3E%3Cstop offset='0.498' stop-color='%23c8c8c8'/%3E%3Cstop offset='0.511' stop-color='%23cccccc'/%3E%3Cstop offset='0.511' stop-color='%23c7c7c7'/%3E%3Cstop offset='0.532' stop-color='%23cccccc'/%3E%3Cstop offset='0.532' stop-color='%23aeaeae'/%3E%3Cstop offset='0.541' stop-color='%23cccccc'/%3E%3Cstop offset='0.541' stop-color='%23c7c7c7'/%3E%3Cstop offset='0.56' stop-color='%23cccccc'/%3E%3Cstop offset='0.56' stop-color='%23747474'/%3E%3Cstop offset='0.581' stop-color='%23cccccc'/%3E%3Cstop offset='0.581' stop-color='%23b5b5b5'/%3E%3Cstop offset='0.6' stop-color='%23cccccc'/%3E%3Cstop offset='0.6' stop-color='%23cecece'/%3E%3Cstop offset='0.618' stop-color='%23cccccc'/%3E%3Cstop offset='0.618' stop-color='%23c8c8c8'/%3E%3Cstop offset='0.656' stop-color='%23cccccc'/%3E%3Cstop offset='0.656' stop-color='%23a2a2a2'/%3E%3Cstop offset='0.679' stop-color='%23cccccc'/%3E%3Cstop offset='0.679' stop-color='%23bbbbbb'/%3E%3Cstop offset='0.689' stop-color='%23cccccc'/%3E%3Cstop offset='0.689' stop-color='%23bfbfbf'/%3E%3Cstop offset='0.720' stop-color='%23cccccc'/%3E%3Cstop offset='0.720' stop-color='%23c0c0c0'/%3E%3Cstop offset='0.734' stop-color='%23cccccc'/%3E%3Cstop offset='0.734' stop-color='%23c6c6c6'/%3E%3Cstop offset='0.748' stop-color='%23cccccc'/%3E%3Cstop offset='0.748' stop-color='%23cbcbcb'/%3E%3Cstop offset='0.764' stop-color='%23cccccc'/%3E%3Cstop offset='0.764' stop-color='%23c5c5c5'/%3E%3Cstop offset='0.788' stop-color='%23cccccc'/%3E%3Cstop offset='0.788' stop-color='%23d0d0d0'/%3E%3Cstop offset='0.808' stop-color='%23cccccc'/%3E%3Cstop offset='0.808' stop-color='%23c3c3c3'/%3E%3Cstop offset='0.831' stop-color='%23cccccc'/%3E%3Cstop offset='0.831' stop-color='%23a6a6a6'/%3E%3Cstop offset='0.856' stop-color='%23cccccc'/%3E%3Cstop offset='0.856' stop-color='%23d3d3d3'/%3E%3Cstop offset='0.872' stop-color='%23cccccc'/%3E%3Cstop offset='0.872' stop-color='%23c0c0c0'/%3E%3Cstop offset='0.894' stop-color='%23cccccc'/%3E%3Cstop offset='0.894' stop-color='%23818181'/%3E%3Cstop offset='0.914' stop-color='%23cccccc'/%3E%3Cstop offset='0.914' stop-color='%23c6c6c6'/%3E%3Cstop offset='0.942' stop-color='%23cccccc'/%3E%3Cstop offset='0.942' stop-color='%23adadad'/%3E%3Cstop offset='0.957' stop-color='%23cccccc'/%3E%3Cstop offset='0.957' stop-color='%23c5c5c5'/%3E%3Cstop offset='0.973' stop-color='%23cccccc'/%3E%3Cstop offset='0.973' stop-color='%23bdbdbd'/%3E%3Cstop offset='1' stop-color='%23cccccc'/%3E%3Cstop offset='1' stop-color='%23cccccc'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23a)' x='0' y='0' width='100%25' height='100%25'/%3E%3C/svg%3E\");background-attachment:fixed;background-size:cover;padding:30px;text-align:center;margin-bottom:1rem;box-shadow:0 0 5px 5px #464649;display:flex;flex-direction:column;margin:auto;justify-content:center;align-items:center;position:absolute;top:200px;left:430px}ion-button[_ngcontent-%COMP%]{margin:10px;height:50px;width:150px;border-radius:10px}.oval-img[_ngcontent-%COMP%]{height:500px;width:500px;top:50px;left:780px;position:absolute;background-color:#fff;border-radius:100%}#bn1[_ngcontent-%COMP%], #bn2[_ngcontent-%COMP%]{display:block;width:150px;height:50px;line-height:50px;margin:20px 10px;text-align:center;color:#fff;background-color:#4caf50;border:none;border-radius:25px;transition:background-color .3s;font-size:14px;font-weight:700;text-transform:uppercase;box-shadow:0 4px 6px #0000001a}#bn1[_ngcontent-%COMP%]:hover, #bn2[_ngcontent-%COMP%]:hover{background-color:#45a049;box-shadow:0 6px 8px #0000004d}#bn3[_ngcontent-%COMP%]{display:block;width:75px;height:20px;line-height:25px;margin:20px 10px;text-align:center;color:#fff;background-color:#008cba;border:none;border-radius:15px;transition:background-color .3s;font-size:10px;font-weight:700;text-transform:uppercase;box-shadow:0 4px 6px #0000001a}#bn3[_ngcontent-%COMP%]:hover{background-color:#00688b;box-shadow:0 6px 8px #0000004d}}@media (max-width: 767px){.desktop[_ngcontent-%COMP%]{display:none}ion-content[_ngcontent-%COMP%]{--background: url(Reconocimiento-facial_cel.f21d34710f5f81cd.jpg) no-repeat center/cover;--background-size: cover}.video-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:30vh;margin-top:140px}.oval-img[_ngcontent-%COMP%]{height:360px;width:360px;position:absolute;background-color:transparent;border-radius:100%}.main-container[_ngcontent-%COMP%]{display:flex;height:200px;width:200px;margin:50px auto;flex-direction:column;align-items:center;justify-content:center}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:5px}ion-button[_ngcontent-%COMP%]{font-size:14px;transition:background-color .3s,box-shadow .3s}.btn_regresar[_ngcontent-%COMP%]{margin-top:25px;font-size:12px;transition:background-color .3s,box-shadow .3s}#bn1[_ngcontent-%COMP%], #bn2[_ngcontent-%COMP%], #bn3[_ngcontent-%COMP%]{display:block;width:125px;height:25px;line-height:50px;margin:10px;text-align:center;color:#fff;background-color:#4caf50;border:none;border-radius:25px;transition:background-color .3s,box-shadow .3s;font-size:14px;font-weight:700;text-transform:uppercase;box-shadow:0 4px 6px #0000001a}#bn1[_ngcontent-%COMP%]:hover, #bn2[_ngcontent-%COMP%]:hover, #bn3[_ngcontent-%COMP%]:hover, .btn_regresar[_ngcontent-%COMP%]:hover{background-color:#45a049;box-shadow:0 6px 8px #0000004d}}"]}),n})()}];let b=(()=>{var c;class n{}return(c=n).\u0275fac=function(t){return new(t||c)},c.\u0275mod=o.oAB({type:c}),c.\u0275inj=o.cJS({imports:[g.Bz.forChild(h),g.Bz]}),n})(),x=(()=>{var c;class n{}return(c=n).\u0275fac=function(t){return new(t||c)},c.\u0275mod=o.oAB({type:c}),c.\u0275inj=o.cJS({imports:[u.ez,E.u5,l.Pc,b]}),n})()}}]);