"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9944],{9944:(M,h,i)=>{i.r(h),i.d(h,{RegisterPageModule:()=>y});var x=i(6814),f=i(95),s=i(6728),p=i(3044),l=i(5861),e=i(6689),b=i(1296);const v=[{path:"",component:(()=>{var o;class a{constructor(t,r,n,g,m){this.elementRef=t,this.auth=r,this.alert=n,this.router=g,this.route=m,this.intentosNum=0,this.vectores=[],this.tomarFoto=!0,this.capturingFrames=!0}ngOnInit(){}ionViewWillEnter(){this.capturingFrames=!0,this.abrirCamaraConVistaPrevia()}showFoto(){this.tomarFoto=!0,this.capturingFrames=!0,this.captureFrames()}abrirCamaraConVistaPrevia(){var t=this;return(0,l.Z)(function*(){const r=t.elementRef.nativeElement.querySelector("#video");try{t.stream=yield navigator.mediaDevices.getUserMedia({video:!0}),r.srcObject=t.stream,r.play()}catch(n){console.error("Error al acceder a la c\xe1mara:",n)}})()}stopVideo(){if(this.stream){const t=this.stream.getTracks();this.capturingFrames=!1,t.forEach(r=>{r.stop()})}}captureFrames(){var t=this;return(0,l.Z)(function*(){const r=t.elementRef.nativeElement.querySelector("#video");let n=document.createElement("canvas"),g=n.getContext("2d");if(t.capturingFrames){g.drawImage(r,0,0,n.width,n.height),g.getImageData(0,0,n.width,n.height),n.width=150,n.height=150,g.drawImage(r,0,0,n.width,n.height);const w=g.getImageData(0,0,n.width,n.height);try{yield t.auth.cargarImagenesRegistro(w.data).subscribe(d=>{"Imagen cargada correctamente"===d.message&&t.auth.generateVectorCaracteristicas("registro").subscribe(u=>{68==Object.keys(u).length||67==Object.keys(u).length?(t.vectores.push(Object.values(u)),t.intentosNum=t.vectores.length,3==t.intentosNum&&(t.stopVideo(),t.route.params.subscribe(C=>{t.router.navigate("camera"!=C.origin?["/registro-usuarios","login",t.vectores]:["/registro-usuarios","camera",t.vectores])}))):t.crearAlerta()})})}catch(d){console.error(d)}yield new Promise(d=>setTimeout(d,100))}})()}crearAlerta(){var t=this;return(0,l.Z)(function*(){(yield t.alert.create({header:"Imagen no valida",buttons:[{text:"ok"}]})).present()})()}PageReturn(){this.route.params.subscribe(t=>{this.router.navigate("camera"!=t.origin?["/login"]:["/camera-log"])})}}return(o=a).\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(b.i),e.Y36(s.Br),e.Y36(p.F0),e.Y36(p.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:23,vars:3,consts:[[3,"translucent"],[3,"fullscreen"],[1,"container-left"],[1,"photo-counter"],[1,"video-container"],["id","video","controls",""],[3,"click"],[1,"photo-container"],["src","../../assets/johnny_perfil_si.png",1,"photo"],["src","../../assets/chavo_si.png",1,"photo"],["src","../../assets/Dross_perfil_si.png",1,"photo"],["src","../../assets/amlo_perfil_si.png",1,"photo"],[1,"label-container"]],template:function(t,r){1&t&&(e._UZ(0,"ion-header",0),e.TgZ(1,"ion-content",1)(2,"div",2)(3,"p",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e._UZ(6,"video",5),e.qZA(),e.TgZ(7,"ion-button",6),e.NdJ("click",function(){return r.showFoto()}),e._uU(8,"Tomar foto"),e.qZA()(),e.TgZ(9,"div",7),e._UZ(10,"img",8)(11,"img",9)(12,"img",10)(13,"img",11),e.qZA(),e.TgZ(14,"div",12)(15,"ion-label"),e._uU(16,"1. La cara debe estar claramente visible, sin obstrucciones."),e.qZA(),e.TgZ(17,"ion-label"),e._uU(18,"2. La iluminaci\xf3n debe ser uniforme y no generar sombras pronunciadas en el rostro."),e.qZA(),e.TgZ(19,"ion-label"),e._uU(20,"3. Evite cualquier tipo de accesorio facial, como gafas de sol o sombreros."),e.qZA(),e.TgZ(21,"ion-label"),e._uU(22,"4. La posici\xf3n de la cabeza debe ser frontal, evitando inclinaciones excesivas."),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(3),e.hij("N\xfamero de fotos tomadas ",r.intentosNum,""))},dependencies:[s.YG,s.W2,s.Gu,s.Q$],styles:["@media (min-width: 991px){.movil[_ngcontent-%COMP%]{display:none}ion-content[_ngcontent-%COMP%]{--background: url(abstract-envelope.292f7db8663eef85.svg) no-repeat center/cover}.container-left[_ngcontent-%COMP%]{width:620px;height:585px;position:fixed;top:50%;left:50px;transform:translateY(-50%);background-color:#89bb8f;padding:10px;display:flex;flex-direction:column;align-items:center;border-radius:10px}.photo-counter[_ngcontent-%COMP%]{text-align:center;font-size:35px;font-style:oblique;margin-top:5px;margin-bottom:10px;color:#292727}.video-container[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:10px}#video[_ngcontent-%COMP%]{max-width:100%;height:auto}ion-button[_ngcontent-%COMP%]{width:100%}.photo-container[_ngcontent-%COMP%]{background-color:#84ce8d;width:470px;height:590px;position:fixed;top:50%;right:15px;transform:translateY(-50%);display:grid;grid-template-columns:repeat(2,1fr);grid-gap:10px;align-items:center;padding:20px;border-radius:10px;box-shadow:0 0 10px #0003}.photo[_ngcontent-%COMP%]{width:100%;height:auto;max-width:200px;border-radius:5px;box-shadow:0 0 5px #0000001a}.label-container[_ngcontent-%COMP%]{height:415px;width:300px;position:fixed;display:grid;grid-gap:10px;align-items:center;justify-content:center;padding:20px;border-radius:10px;box-shadow:0 0 10px #0003;top:180px;right:530px}ion-label[_ngcontent-%COMP%]{display:block;text-align:center;padding:10px;background-color:#84ce8d;color:#000;border-radius:5px;box-shadow:0 2px 4px #0000001a;font-size:18px}}@media (max-width: 767px){.desktop[_ngcontent-%COMP%]{display:none}ion-content[_ngcontent-%COMP%]{--background: url(abstract-envelope.292f7db8663eef85.svg) no-repeat center/cover}.container-left[_ngcontent-%COMP%]{width:350px;height:290px;position:fixed;display:flex;background-color:#89bb8f;flex-direction:column;margin:10px auto 0!important;justify-content:center;align-items:center;border-radius:10px}.photo-counter[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-style:oblique;margin:5px 0 10px;color:#292727}.video-container[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:10px}#video[_ngcontent-%COMP%]{max-width:290px;height:190px}ion-button[_ngcontent-%COMP%]{width:150px;height:5px;--padding-top: 0;--padding-bottom: 0;margin-top:0;font-size:12px}.photo-container[_ngcontent-%COMP%]{background-color:#84ce8d;width:270px;height:245px;position:fixed;left:55px;margin-top:590px;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:10px;align-items:center;padding:10px;border-radius:10px;box-shadow:0 0 10px #0003}.photo[_ngcontent-%COMP%]{width:110px;height:100px;border-radius:5px;box-shadow:0 0 5px #0000001a}.label-container[_ngcontent-%COMP%]{width:350px;height:255px;position:fixed;display:grid;grid-gap:10px;align-items:center;justify-content:center;padding:20px;border-radius:10px;box-shadow:0 0 10px #0003;margin-top:325px;margin-left:18px}ion-label[_ngcontent-%COMP%]{display:block;text-align:center;padding:9px;background-color:#84ce8d;color:#000;border-radius:5px;box-shadow:0 2px 4px #0000001a;font-size:12px}}"]}),a})()}];let P=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(v),p.Bz]}),a})(),y=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[x.ez,f.u5,s.Pc,P]}),a})()}}]);